<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
	<title>Electronics - VidX</title>

	<!-- PWA Meta Tags -->
	<meta name="theme-color" content="#6366f1">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="apple-mobile-web-app-title" content="VidX">
	<meta name="mobile-web-app-capable" content="yes">
	<link rel="manifest" href="/manifest.json">
	<link rel="apple-touch-icon" sizes="180x180" href="/images/ios/180.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/images/ios/152.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/images/ios/120.png">

	<script>
		(function() {
			const storedTheme = localStorage.getItem('theme');
			if (storedTheme === 'light') {
				document.documentElement.classList.remove('dark');
			} else {
				document.documentElement.classList.add('dark');
			}
		})();
	</script>

	<script src="https://cdn.tailwindcss.com"></script>
	<script>
		tailwind.config = {
			darkMode: 'class',
			theme: {
				extend: {
					colors: {
						dark: {
							50: '#18191A',
							100: '#242526',
							200: '#3A3B3C',
							300: '#4E4F50',
							400: '#6B6C6D',
							500: '#B0B3B8',
							600: '#E4E6EB',
							700: '#F5F6F7'
						}
					}
				}
			}
		};
	</script>

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
	<link rel="stylesheet" href="/css/dark-mode.css">
	<script src="components/auth-modal.js"></script>
	<script src="js/video-card-engagement.js"></script>

	<style>
		html, body {
			min-height: 100%;
		}

		.scroll-container {
			scrollbar-width: thin;
			scrollbar-color: #6366f1 #f1f1f1;
		}
		.scroll-container::-webkit-scrollbar {
			height: 6px;
		}
		.scroll-container::-webkit-scrollbar-track {
			background: #f1f1f1;
			border-radius: 10px;
		}
		.scroll-container::-webkit-scrollbar-thumb {
			background-color: #6366f1;
			border-radius: 10px;
		}

		.filter-option {
			transition: all 0.2s ease;
		}
		.filter-option:hover {
			background-color: rgba(99, 102, 241, 0.08);
		}
		.filter-option.active {
			background-color: #6366f1;
			color: #fff;
		}

		.video-grid {
			display: grid;
			gap: 1.5rem;
			padding: 0 1rem;
		}

		@media (max-width: 1023px) {
			body {
				padding: 0;
				margin: 0;
				overflow-x: hidden;
			}

			.video-grid {
				display: block;
				height: 100vh;
				height: 100dvh;
				overflow-y: scroll;
				overflow-x: hidden;
				scroll-snap-type: y mandatory;
				scroll-behavior: smooth;
				padding: 0;
				margin: 0;
				gap: 0;
				-webkit-overflow-scrolling: touch;
			}

			.video-card {
				scroll-snap-align: start;
				scroll-snap-stop: always;
				min-height: 100vh;
				min-height: 100dvh;
				height: 100vh;
				height: 100dvh;
				width: 100vw;
				max-width: 100vw;
				margin-bottom: 0 !important;
				border-radius: 0;
			}
		}

		@media (min-width: 1024px) {
			.video-grid {
				grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
				justify-items: center;
				gap: 2.5rem;
				padding: 0 2rem 2.5rem;
				max-width: 1200px;
				margin: 6rem auto 0; /* Added top margin to push videos below header */
			}
		}

		.video-card {
			position: relative;
			background: #000;
			border-radius: 12px;
			overflow: hidden;
			margin-bottom: 1.5rem;
			aspect-ratio: 9 / 16;
			box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
			cursor: pointer;
		}

		@media (min-width: 1024px) {
			.video-card {
				margin-bottom: 0;
				width: min(100%, 360px);
				max-width: 360px;
			}
		}

		@media (min-width: 1440px) {
			.video-card {
				max-width: 400px;
			}
		}

		.video-card video {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			object-fit: cover;
			background: #000;
			pointer-events: none;
		}

		.video-card video::-webkit-media-controls,
		.video-card video::-webkit-media-controls-enclosure {
			display: none !important;
		}

		.volume-indicator {
			position: absolute;
			top: 1rem;
			right: 1rem;
			background: rgba(0, 0, 0, 0.6);
			border-radius: 9999px;
			padding: 0.5rem;
			z-index: 10;
			transition: opacity 0.3s ease;
		}

		.volume-indicator.fade-out {
			opacity: 0;
			pointer-events: none;
		}

		.video-overlay {
			position: absolute;
			bottom: 0;
			left: 0;
			right: 0;
			padding: 1.5rem;
			background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.4) 50%, transparent 100%);
			z-index: 5;
			pointer-events: none;
		}

		/* Mobile: Add padding for bottom nav */
		@media (max-width: 1023px) {
			.video-overlay {
				padding-bottom: calc(5rem + env(safe-area-inset-bottom, 0px)); /* 5rem = 80px for nav bar + 1.5rem padding */
			}
		}

		/* Desktop: Normal padding */
		@media (min-width: 1024px) {
			.video-overlay {
				padding-bottom: 1.5rem;
			}
		}

		.video-overlay > * {
			pointer-events: auto;
		}

		#vertical-home-btn,
		#vertical-filter-btn {
			width: 36px;
			height: 48px;
		}

		@media (min-width: 640px) {
			#vertical-home-btn,
			#vertical-filter-btn {
				width: 44px;
				height: 100px;
				flex-direction: column;
				gap: 0.5rem;
				padding: 1rem 0.5rem;
			}

			#vertical-home-btn::after {
				content: 'HOME';
				font-size: 0.625rem;
				font-weight: 500;
				letter-spacing: 0.05em;
				writing-mode: vertical-rl;
				transform: rotate(180deg);
			}

			#vertical-filter-btn::after {
				content: 'FILTER';
				font-size: 0.625rem;
				font-weight: 500;
				letter-spacing: 0.05em;
				writing-mode: vertical-rl;
				transform: rotate(180deg);
			}
		}
	</style>
</head>
<body class="bg-gray-50 dark:bg-dark-50 dark-mode-transition">
	<!-- Navigation -->
	<nav class="bg-white dark:bg-dark-100 shadow-sm dark:shadow-dark-200 hidden lg:block">
		<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
			<div class="flex justify-between h-16">
				<div class="flex items-center space-x-8">
					<a href="index.html" class="flex-shrink-0 flex items-center">
						<i data-feather="cpu" class="text-indigo-600 dark:text-indigo-400 h-8 w-8"></i>
						<span class="ml-2 text-xl font-bold text-gray-900 dark:text-dark-600">VidX</span>
					</a>
					<!-- Category Quick Links in Header (Desktop Only) -->
					<div class="hidden md:flex items-center space-x-2">
						<a href="automotive.html" class="px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-dark-500 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-gray-50 dark:hover:bg-dark-200 rounded-md transition">
							Automotive
						</a>
						<a href="electronics.html" class="px-3 py-1.5 text-sm font-medium text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-dark-200 rounded-md">
							Electronics
						</a>
						<a href="fashion.html" class="px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-dark-500 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-gray-50 dark:hover:bg-dark-200 rounded-md transition">
							Fashion
						</a>
						<a href="index.html" class="px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-dark-500 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-gray-50 dark:hover:bg-dark-200 rounded-md transition">
							Home & Garden
						</a>
					</div>
				</div>
				<div class="flex items-center space-x-4">
					<a href="upload.html" class="bg-indigo-600 dark:bg-indigo-500 text-white h-7 sm:h-8 px-3 sm:px-4 rounded-full flex items-center hover:bg-indigo-700 dark:hover:bg-indigo-600 transition text-sm sm:text-base whitespace-nowrap">
						<i data-feather="plus" class="h-4 w-4 sm:h-5 sm:w-5 mr-1 sm:mr-2"></i>
						<span>New Ad</span>
					</a>
					<button id="theme-toggle" class="p-1.5 sm:p-2 rounded-full text-gray-500 dark:text-dark-500 hover:bg-gray-100 dark:hover:bg-dark-200">
						<i data-feather="moon" class="h-5 w-5 dark:hidden"></i>
						<i data-feather="sun" class="h-5 w-5 hidden dark:block"></i>
					</button>
					<button id="user-btn" class="p-1.5 sm:p-2 rounded-full text-gray-500 dark:text-dark-500 hover:bg-gray-100 dark:hover:bg-dark-200 flex items-center">
						<img id="nav-avatar" src="" alt="" class="hidden h-6 w-6 rounded-full object-cover">
						<span id="nav-username" class="hidden ml-2 text-sm font-medium"></span>
						<i data-feather="user" class="h-5 w-5"></i>
					</button>
				</div>
			</div>
		</div>
	</nav>

	<!-- Mobile Bottom Navigation Menu (Mobile Only) -->
	<div class="lg:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-dark-100 border-t border-gray-200 dark:border-dark-300 z-40" style="padding-bottom: env(safe-area-inset-bottom);">
		<div class="flex justify-around items-center h-16">
			<a href="index.html" class="flex flex-col items-center justify-center flex-1 py-2 text-gray-600 dark:text-dark-400 hover:text-indigo-600 dark:hover:text-indigo-400">
				<i data-feather="home" class="h-5 w-5 mb-1"></i>
				<span class="text-xs">Home</span>
			</a>
			<a href="search-electronics.html" class="flex flex-col items-center justify-center flex-1 py-2 text-gray-600 dark:text-dark-400 hover:text-indigo-600 dark:hover:text-indigo-400">
				<i data-feather="sliders" class="h-5 w-5 mb-1"></i>
				<span class="text-xs">Filters</span>
			</a>
			<a href="index.html" class="flex flex-col items-center justify-center flex-1 py-2 text-gray-600 dark:text-dark-400 hover:text-indigo-600 dark:hover:text-indigo-400">
				<i data-feather="heart" class="h-5 w-5 mb-1"></i>
				<span class="text-xs">Favourites</span>
			</a>
			<a href="upload.html" class="flex flex-col items-center justify-center flex-1 py-2 text-gray-600 dark:text-dark-400 hover:text-indigo-600 dark:hover:text-indigo-400">
				<i data-feather="plus-circle" class="h-5 w-5 mb-1"></i>
				<span class="text-xs">Upload</span>
			</a>
			<a href="index.html" class="flex flex-col items-center justify-center flex-1 py-2 text-gray-600 dark:text-dark-400 hover:text-indigo-600 dark:hover:text-indigo-400">
				<i data-feather="message-circle" class="h-5 w-5 mb-1"></i>
				<span class="text-xs">Messages</span>
			</a>
		</div>
	</div>

	<!-- Hidden legacy filters for compatibility -->
	<div class="hidden">
		<div class="bg-white dark:bg-dark-100 shadow-sm dark:shadow-dark-200 sticky top-0 z-[100]">
			<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3">
				<div class="flex space-x-4 overflow-x-auto pb-2 scroll-container">
					<div class="relative">
						<button id="brand-filter-btn" class="filter-option flex items-center px-4 py-2 border border-gray-200 dark:border-dark-200 rounded-full text-sm font-medium text-gray-700 dark:text-dark-500 hover:border-indigo-300 dark:hover:border-indigo-400">
							<span>Brand</span>
							<i data-feather="chevron-down" class="ml-2 h-4 w-4"></i>
						</button>
						<div id="brand-filter-menu" class="absolute z-[9999] mt-2 w-72 bg-white dark:bg-dark-100 rounded-md shadow-lg dark:shadow-dark-200" style="display: none;">
							<div class="p-2">
								<div class="px-3 py-2 sticky top-0 bg-white dark:bg-dark-100">
									<input type="text" id="brand-search" placeholder="Search brand" class="w-full px-3 py-2 border border-gray-300 dark:border-dark-200 bg-white dark:bg-dark-100 text-gray-900 dark:text-dark-600 rounded-md">
								</div>
								<div class="max-h-96 overflow-y-auto" id="brand-list"></div>
							</div>
						</div>
					</div>

					<div class="relative">
						<button id="category-filter-btn" class="filter-option flex items-center px-4 py-2 border border-gray-200 dark:border-dark-200 rounded-full text-sm font-medium text-gray-700 dark:text-dark-500 hover:border-indigo-300 dark:hover-border-indigo-400">
							<span>Category</span>
							<i data-feather="chevron-down" class="ml-2 h-4 w-4"></i>
						</button>
						<div id="category-filter-menu" class="absolute z-[9999] mt-2 w-72 bg-white dark:bg-dark-100 rounded-md shadow-lg dark:shadow-dark-200" style="display: none;">
							<div class="p-2 max-h-96 overflow-y-auto" id="category-list"></div>
						</div>
					</div>

					<div class="relative">
						<button id="condition-filter-btn" class="filter-option flex items-center px-4 py-2 border border-gray-200 dark:border-dark-200 rounded-full text-sm font-medium text-gray-700 dark:text-dark-500 hover:border-indigo-300 dark:hover-border-indigo-400">
							<span>Condition</span>
							<i data-feather="chevron-down" class="ml-2 h-4 w-4"></i>
						</button>
						<div id="condition-filter-menu" class="absolute z-[9999] mt-2 w-64 bg-white dark:bg-dark-100 rounded-md shadow-lg dark:shadow-dark-200" style="display: none;">
							<div class="p-2" id="condition-list"></div>
						</div>
					</div>

					<div class="relative">
						<button id="price-filter-btn" class="filter-option flex items-center px-4 py-2 border border-gray-200 dark:border-dark-200 rounded-full text-sm font-medium text-gray-700 dark:text-dark-500 hover-border-indigo-300 dark:hover-border-indigo-400">
							<span>Price</span>
							<i data-feather="chevron-down" class="ml-2 h-4 w-4"></i>
						</button>
						<div id="price-filter-menu" class="absolute z-[9999] mt-2 w-64 bg-white dark:bg-dark-100 rounded-md shadow-lg dark:shadow-dark-200" style="display: none;">
							<div class="p-4 space-y-4">
								<div>
									<label for="price-min" class="block text-sm text-gray-500 dark:text-dark-400">Min Price (EUR)</label>
									<input type="number" id="price-min" class="mt-1 w-full px-3 py-2 border border-gray-300 dark:border-dark-200 bg-white dark:bg-dark-100 text-gray-900 dark:text-dark-600 rounded-md" placeholder="0">
								</div>
								<div>
									<label for="price-max" class="block text-sm text-gray-500 dark:text-dark-400">Max Price (EUR)</label>
									<input type="number" id="price-max" class="mt-1 w-full px-3 py-2 border border-gray-300 dark:border-dark-200 bg-white dark:bg-dark-100 text-gray-900 dark:text-dark-600 rounded-md" placeholder="5000">
								</div>
								<div class="flex justify-between">
									<button id="price-reset" class="px-4 py-2 text-sm rounded-md border border-gray-200 dark:border-dark-200 text-gray-700 dark:text-dark-500 hover:bg-gray-100 dark:hover:bg-dark-200">Reset</button>
									<button id="price-apply" class="px-4 py-2 text-sm rounded-md bg-indigo-600 dark:bg-indigo-500 text-white hover:bg-indigo-700 dark:hover:bg-indigo-600">Apply</button>
								</div>
							</div>
						</div>
					</div>

					<div class="relative">
						<button id="location-filter-btn" class="filter-option flex items-center px-4 py-2 border border-gray-200 dark:border-dark-200 rounded-full text-sm font-medium text-gray-700 dark:text-dark-500 hover-border-indigo-300 dark:hover-border-indigo-400">
							<span>Location</span>
							<i data-feather="chevron-down" class="ml-2 h-4 w-4"></i>
						</button>
						<div id="location-filter-menu" class="absolute z-[9999] mt-2 w-72 bg-white dark:bg-dark-100 rounded-md shadow-lg dark:shadow-dark-200" style="display: none;">
							<div class="p-2">
								<div class="px-3 py-2 sticky top-0 bg-white dark:bg-dark-100">
									<input type="text" id="location-search" placeholder="Search location" class="w-full px-3 py-2 border border-gray-300 dark:border-dark-200 bg-white dark:bg-dark-100 text-gray-900 dark:text-dark-600 rounded-md">
								</div>
								<div class="max-h-80 overflow-y-auto" id="location-list"></div>
							</div>
						</div>
					</div>

					<button id="reset-filters" class="filter-option flex items-center px-4 py-2 border border-gray-200 dark:border-dark-200 rounded-full text-sm font-medium text-gray-700 dark:text-dark-500 hover-border-indigo-300 dark:hover-border-indigo-400">
						<span>Reset</span>
						<i data-feather="x" class="ml-2 h-4 w-4"></i>
					</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Video Grid -->
	<div class="video-grid" id="video-grid"></div>

	<div id="no-results" class="hidden text-center py-16 px-4">
		<div class="inline-flex items-center justify-center h-16 w-16 rounded-full bg-indigo-100 text-indigo-600 mb-4">
			<i data-feather="search" class="h-8 w-8"></i>
		</div>
		<h3 class="text-xl font-semibold text-gray-900 dark:text-dark-600">No electronics match your filters</h3>
		<p class="mt-2 text-gray-500 dark:text-dark-400">Try adjusting your filters or reset them to see all listings.</p>
		<button id="no-results-reset" class="mt-6 px-4 py-2 rounded-md bg-indigo-600 dark:bg-indigo-500 text-white hover:bg-indigo-700 dark:hover:bg-indigo-600">Reset Filters</button>
	</div>

	<script type="module" src="./js/electronics-page.js"></script>
	<script>
		// iOS Safari: Collapsible navigation bar
		const isIOSSafari = /iPhone|iPad|iPod/.test(navigator.userAgent) && 
		                   /Safari/.test(navigator.userAgent) && 
		                   !/CriOS|FxiOS|EdgiOS/.test(navigator.userAgent);
		
		if (isIOSSafari) {
			const navBar = document.querySelector('.lg\\:hidden.fixed.bottom-0');
			
			// Remove nav bar border for seamless look
			navBar.style.border = 'none';
			
			// Make nav bar narrower to fit toggle button
			navBar.style.right = '40px'; // Leave 40px for toggle button
			
			// Initially collapse the nav bar
			navBar.style.transform = 'translateX(calc(100% + 40px))'; // Slide completely off-screen
			navBar.style.transition = 'transform 0.3s ease';
			
			// Create toggle button that matches nav bar height and style
			const toggleBtn = document.createElement('button');
			toggleBtn.id = 'nav-toggle';
			toggleBtn.className = 'fixed z-50 bg-white dark:bg-dark-100 transition-all duration-300';
			toggleBtn.style.cssText = 'right: 0; bottom: 0; width: 40px; height: calc(64px + env(safe-area-inset-bottom)); border: none; display: flex; align-items: center; justify-content: center; padding-bottom: env(safe-area-inset-bottom);';
			toggleBtn.innerHTML = '<i data-feather="chevron-left" class="h-5 w-5 text-gray-700 dark:text-dark-600" style="margin-bottom: env(safe-area-inset-bottom);"></i>';
			
			let navExpanded = false;
			
			toggleBtn.addEventListener('click', () => {
				navExpanded = !navExpanded;
				
				if (navExpanded) {
					// Expand nav bar
					navBar.style.transform = 'translateX(0)';
					toggleBtn.querySelector('i').setAttribute('data-feather', 'chevron-right');
				} else {
					// Collapse nav bar
					navBar.style.transform = 'translateX(calc(100% + 40px))';
					toggleBtn.querySelector('i').setAttribute('data-feather', 'chevron-left');
				}
				
				feather.replace();
			});
			
			document.body.appendChild(toggleBtn);
			feather.replace();
		}
	</script>
</body>
</html>
